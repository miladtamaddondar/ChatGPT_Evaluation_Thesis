1. To write $\mathbf{y}$ as the sum of a vector in $W$ and a vector orthogonal to $W$, we need to find the orthogonal projection of $\mathbf{y}$ onto $W$ (call it $\mathbf{y}_W$) and then compute $\mathbf{y} - \mathbf{y}_W$ for the orthogonal component.  
2. First, form the matrix $U = [\mathbf{u}_1 \ \mathbf{u}_2 \ \mathbf{u}_3] = \begin{bmatrix} 1 & -1 & -1 \\ 1 & 3 & 0 \\ 0 & 1 & 1 \\ 1 & -2 & 1 \end{bmatrix}$.  
3. The projection of $\mathbf{y}$ onto $W$ is $\mathbf{y}_W = U(U^T U)^{-1} U^T \mathbf{y}$.  
4. Compute $U^T U = \begin{bmatrix} 1 & 1 & 0 & 1 \\ -1 & 3 & 1 & -2 \\ -1 & 0 & 1 & 1 \end{bmatrix} \begin{bmatrix} 1 & -1 & -1 \\ 1 & 3 & 0 \\ 0 & 1 & 1 \\ 1 & -2 & 1 \end{bmatrix} = \begin{bmatrix} 3 & 0 & 0 \\ 0 & 15 & 7 \\ 0 & 7 & 3 \end{bmatrix}$.  
5. Compute $U^T \mathbf{y} = \begin{bmatrix} 1 & 1 & 0 & 1 \\ -1 & 3 & 1 & -2 \\ -1 & 0 & 1 & 1 \end{bmatrix} \begin{bmatrix} 4 \\ 3 \\ 3 \\ -1 \end{bmatrix} = \begin{bmatrix} 4 + 3 + 0 - 1 = 6 \\ -4 + 9 + 3 + 2 = 10 \\ -4 + 0 + 3 - 1 = -2 \end{bmatrix} = \begin{bmatrix} 6 \\ 10 \\ -2 \end{bmatrix}$.  
6. Solve $(U^T U)\mathbf{c} = U^T \mathbf{y}$ for $\mathbf{c}$, where $\mathbf{c} = \begin{bmatrix} c_1 \\ c_2 \\ c_3 \end{bmatrix}$ are the coordinates in the basis $\mathbf{u}_1, \mathbf{u}_2, \mathbf{u}_3$: $\begin{bmatrix} 3 & 0 & 0 \\ 0 & 15 & 7 \\ 0 & 7 & 3 \end{bmatrix} \begin{bmatrix} c_1 \\ c_2 \\ c_3 \end{bmatrix} = \begin{bmatrix} 6 \\ 10 \\ -2 \end{bmatrix}$.  
7. From the first row: $3c_1 = 6 \implies c_1 = 2$.  
8. From the second and third rows: $15c_2 + 7c_3 = 10$ and $7c_2 + 3c_3 = -2$.  
9. Solve for $c_2$ and $c_3$: Multiply the third equation by $-5$ and add to the second: $15c_2 + 7c_3 + (-35c_2 - 15c_3) = 10 + 10 \implies -20c_2 - 8c_3 = 20 \implies 5c_2 + 2c_3 = -5$.  
10. Now solve for $c_3$ from the third equation: $7c_2 + 3c_3 = -2 \implies 3c_3 = -2 - 7c_2 \implies c_3 = \frac{-2 - 7c_2}{3}$.  
11. Substitute $c_3$ into $5c_2 + 2c_3 = -5$: $5c_2 + 2\left(\frac{-2 - 7c_2}{3}\right) = -5 \implies 15c_2 - 4 - 14c_2 = -15 \implies c_2 - 4 = -15 \implies c_2 = -11$.  
12. Substitute $c_2 = -11$ into $c_3 = \frac{-2 - 7c_2}{3} = \frac{-2 - 7(-11)}{3} = \frac{-2 + 77}{3} = \frac{75}{3} = 25$.  
13. So $\mathbf{c} = \begin{bmatrix} 2 \\ -11 \\ 25 \end{bmatrix}$.  
14. Compute $\mathbf{y}_W = 2\mathbf{u}_1 - 11\mathbf{u}_2 + 25\mathbf{u}_3 = 2\begin{bmatrix} 1 \\ 1 \\ 0 \\ 1 \end{bmatrix} - 11\begin{bmatrix} -1 \\ 3 \\ 1 \\ -2 \end{bmatrix} + 25\begin{bmatrix} -1 \\ 0 \\ 1 \\ 1 \end{bmatrix} = \begin{bmatrix} 2 \\ 2 \\ 0 \\ 2 \end{bmatrix} + \begin{bmatrix} 11 \\ -33 \\ -11 \\ 22 \end{bmatrix} + \begin{bmatrix} -25 \\ 0 \\ 25 \\ 25 \end{bmatrix} = \begin{bmatrix} 2 + 11 - 25 \\ 2 - 33 + 0 \\ 0 - 11 + 25 \\ 2 + 22 + 25 \end{bmatrix} = \begin{bmatrix} -12 \\ -31 \\ 14 \\ 49 \end{bmatrix}$.  
15. Compute the orthogonal component: $\mathbf{y} - \mathbf{y}_W = \begin{bmatrix} 4 \\ 3 \\ 3 \\ -1 \end{bmatrix} - \begin{bmatrix} -12 \\ -31 \\ 14 \\ 49 \end{bmatrix} = \begin{bmatrix} 16 \\ 34 \\ -11 \\ -50 \end{bmatrix}$.  
16. Therefore, the decomposition is $\boxed{\mathbf{y} = \underbrace{\begin{bmatrix} -12 \\ -31 \\ 14 \\ 49 \end{bmatrix}}_{\in W} + \underbrace{\begin{bmatrix} 16 \\ 34 \\ -11 \\ -50 \end{bmatrix}}_{\perp W}}$.